<% layout("/layouts/boilerplate.ejs") %>

<body>
  <div class="container">
    <div class="row">
      <div class="col">
        <div class="list-group">
          <% todos.reverse().forEach(todo => { %>
          <!-- Reversing the array to show newest tasks on top -->
          <div
            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
          >
            <div class="flex-grow-1">
              <% if (!todo.completed) { %> <%= todo.todo %> <% } else { %>
              <del><%= todo.todo %></del>
              <% } %>
            </div>
            <div class="btn-group">
              <form
                action="/todo/<%=todo._id%>/completed?_method=PATCH"
                method="post"
                class="d-inline"
              >
                <button
                  type="submit"
                  class="material-symbols-outlined btn btn-sm btn-success"
                >
                  check
                </button>
              </form>
              <form
                action="/todo/<%=todo._id%>/edit?"
                method="get"
                class="d-inline"
              >
                <button
                  type="submit"
                  class="material-symbols-outlined mx-1 btn btn-sm btn-primary"
                >
                  edit
                </button>
              </form>
              <form
                action="/todo/<%=todo._id%>/delete?_method=DELETE"
                method="post"
                class="d-inline"
              >
                <button
                  type="submit"
                  class="material-symbols-outlined btn btn-sm btn-danger"
                >
                  delete
                </button>
              </form>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </div>
  </div>
</body>
